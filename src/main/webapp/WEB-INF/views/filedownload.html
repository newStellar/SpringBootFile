<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.js"></script>
    <
</head>

<body ng-app ="myApp" ng-controller ="myCtrl">
<div class="container">
    <div class="jumbotron">
        <p style ="text-align: center">
            {{mobile}}
        </p>
    </div>
    <div>
        <p> Enter the file name: <input class="form-control" type = "text" ng-model = "imageName"/> </p>

        <button class = "btn btn-info" ng-click = "produceImage()">check Availability </button>
        <button class = "btn btn-success" ng-click = "Testdownload()" ng-show="available">Download</button>
        <a ng-href="{{downloadImageLink}}" download id="download" hidden></a>

    </div>

</div>

<script>


    var app = angular.module("myApp",[]);

    app.controller("myCtrl",function($scope,$http){

        $scope.downloadImageLink = "/image/";
        $scope.available = false;
        $scope.mobile = "Spring Boot File Upload and Download Application";

        $scope.Testdownload =function() {

            console.log($scope.downloadImageLink);
            document.getElementById('download').click();

        }
        $scope.$watch("imageName",function(){

            $scope.available = false;
        })
        $scope.produceImage = function(){

            $scope.downloadImageLink = "/image/";
            $scope.available = true;
            $scope.downloadImageLink = $scope.downloadImageLink+$scope.imageName;
        }
    });

</script>


</body>
